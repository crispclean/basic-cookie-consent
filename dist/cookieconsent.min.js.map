{"mappings":"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","sources":["src/cookieconsent.js"],"names":["defaultDOMString","defaultContent","desc","buttonAccept","moreInfo","moreInfoLink","bottomRight","bottomLeft","CookieConsent","_this","this","params","arguments","length","undefined","_classCallCheck","position","content","_objectSpread","domString","document","addEventListener","getCookie","showCookieConsent","_createClass","key","value","elements","parseDOMString","populateElements","appendElementsToDOM","html","DOMParser","parseFromString","Array","from","body","childNodes","_this2","forEach","el","_el$classList","id","classList","add","apply","_toConsumableArray","eval","href","target","innerHTML","arrayOfNodes","fragment","append","createDocumentFragment","item","appendChild","cloneNode","querySelector","dismissCookie","bind","setCookie","essential","marketing","personal","removeChild","getElementById","name","expire","Date","setTime","getTime","cookie","JSON","stringify","toUTCString","nameEQ","ca","split","i","c","charAt","substring","indexOf"],"version":3,"file":"cookieconsent.min.js.map","sourcesContent":["/** ES6/Tailwind version */\n\nconst defaultDOMString = `\n  <div id=\"basicCookieConsent\" class=\"fixed p-4 bg-white text-black z-10\">\n    <div id=\"desc\"></div>\n    <div class=\"flex justify-between items-center mt-4\">\n      <button id=\"buttonAccept\" class=\"bg-black text-white px-4 py-2\"></button>\n      <a id=\"moreInfo\" href></a>\n    </div>\n  </div>`;\n\nconst defaultContent = {\n  desc: \"This website uses cookies to enhance your browsing experience.\",\n  buttonAccept: \"OK\",\n  moreInfo: \"Learn more\",\n  moreInfoLink: \"https://wikis.ec.europa.eu/display/WEBGUIDE/04.+Cookies\",\n};\n\nconst bottomRight = [\"right-0\", \"bottom-0\", \"mx-4\", \"mb-4\", \"lg:w-1/3\"];\nconst bottomLeft = [\"left-0\", \"bottom-0\", \"mx-4\", \"mb-4\", \"lg:w-1/3\"];\n\nconst CookieConsent = class {\n  constructor(params = {}) {\n    this.position = params.position ? position : \"bottomRight\";\n    this.content = { ...defaultContent, ...params.content };\n    this.domString = defaultDOMString;\n\n    document.addEventListener(\"DOMContentLoaded\", () => {\n      if (!this.getCookie(\"basic-cookie-consent\")) {\n        this.showCookieConsent();\n      }\n    });\n  }\n\n  showCookieConsent() {\n    let elements = this.parseDOMString(this.domString);\n    elements = this.populateElements(this.parseDOMString(this.domString));\n    this.appendElementsToDOM(elements);\n  }\n\n  parseDOMString(domString) {\n    let html = new DOMParser().parseFromString(domString, \"text/html\");\n    return Array.from(html.body.childNodes);\n  }\n\n  populateElements(elements) {\n    elements.forEach((el) => {\n      if (el.id === \"basicCookieConsent\") {\n        el.classList.add(...eval(this.position)); //check to use alternative for eval\n      }\n      if (el.id === \"moreInfo\" && this.content[\"moreInfoLink\"]) {\n        el.href = this.content[\"moreInfoLink\"];\n        el.target = \"_blank\";\n      }\n      if (el.childNodes.length) {\n        this.populateElements(el.childNodes);\n      }\n      if (this.content[el.id]) {\n        el.innerHTML = this.content[el.id];\n      }\n    });\n    return elements;\n  }\n\n  appendElementsToDOM(elements) {\n    const toNodeList = function (arrayOfNodes) {\n      let fragment = document.createDocumentFragment();\n      arrayOfNodes.forEach(function (item) {\n        fragment.appendChild(item.cloneNode(true));\n      });\n      return fragment.childNodes;\n    };\n\n    document.body.append(toNodeList(elements)[0]);\n\n    //Need to add onclick here since cloneNode (above) does not copy event listeners - lame\n    const buttonAccept = document.body.querySelector(\"#buttonAccept\");\n    buttonAccept &&\n      buttonAccept.addEventListener(\"click\", this.dismissCookie.bind(this));\n  }\n\n  dismissCookie() {\n    this.setCookie(\"basic-cookie-consent\", {\n      essential: true,\n      marketing: false,\n      personal: false,\n    });\n    document.body.removeChild(document.getElementById(\"basicCookieConsent\")); // https://www.tutorialspoint.com/how-can-detached-dom-elements-cause-memory-leak-in-javascript\n  }\n\n  setCookie(name, value) {\n    const expire = new Date();\n    expire.setTime(expire.getTime() + expire * 24 * 60 * 60 * 1000);\n    const cookie =\n      name +\n      \"=\" +\n      JSON.stringify(value) +\n      \";\" +\n      \"expires=\" +\n      expire.toUTCString() +\n      \";\";\n\n    document.cookie = cookie;\n  }\n\n  getCookie(name) {\n    var nameEQ = name + \"=\";\n    var ca = document.cookie.split(\";\");\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n      while (c.charAt(0) == \" \") c = c.substring(1, c.length);\n      if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n    }\n    return null;\n  }\n\n  eraseCookie(name) {\n    document.cookie = name + \"=; Max-Age=-99999999;\";\n  }\n};\n\nexport default CookieConsent;\n"]}